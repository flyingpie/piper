@using Piper.Core.Data

@inject TooltipService Tooltips

<RadzenStack Orientation="Orientation.Vertical">

	@* <RadzenTextBox @bind-Value="SearchTerm" /> *@

	<RadzenDataGrid

		TItem="PpRecord"

		@ref="_grid"

		AllowAlternatingRows="true"
		AllowColumnResize="true"
		AllowFiltering="true"
		AllowMultiColumnSorting="true"
		AllowPaging="true"
		AllowSorting="true"

		FilterMode="FilterMode.SimpleWithMenu"
		LogicalFilterOperator="LogicalFilterOperator.Or"
		PagerHorizontalAlign="HorizontalAlign.Left"
		PageSize="15"
		SelectionMode="DataGridSelectionMode.Single"
		ShowPagingSummary="true"

		Data="@Records"
		Count="@RecordCount"
		LoadData="@LoadDataAsync"

	>
		<Columns>

			@foreach (var field in Columns)
			{
				<RadzenDataGridColumn
					TItem="PpRecord"
					Title="@field.Name"
					Width="@GetWidth(field)"
					TextAlign="@(GetAlign(field))"
					Property="@field.Name"
				>
					<Template Context="item">
						@switch (field.PpDataType)
						{
							case PpDataType.PpDateTime:
								@item.GetValue(field.Name)
								break;

							default:
								<Tooltip Text="@(item.GetValue(field.Name)?.ToString())">
									@item.GetValue(field.Name)
								</Tooltip>
								break;
						}
					</Template>
				</RadzenDataGridColumn>
			}

		</Columns>
	</RadzenDataGrid>

</RadzenStack>